<nz-card class="p-2 bg-gray-50 min-w-[480px]">
  @if(currentRoute === 'shop'){
  <form class="flex items-center pb-3">
    <label for="simple-search" class="sr-only">Tìm kiếm</label>
    <div class="relative w-full">
      <div
        class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
      >
        <svg
          class="w-4 h-4 text-gray-500 dark:text-gray-400"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 18 20"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 5v10M3 5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm12 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm0 0V6a3 3 0 0 0-3-3H9m1.5-2-2 2 2 2"
          />
        </svg>
      </div>
      <input
        type="text"
        (input)="onSearchProductShort($event)"
        [nzAutocomplete]="auto"
        id="simple-search"
        class="outline-none bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5"
        placeholder="Tìm kiếm sản phẩm thuê..."
        required
      />
    </div>
  </form>
  <!-- tag found product search  -->
  @for (tagItem of tags; track tagItem) {
  <nz-tag
    [nzColor]="'blue'"
    [nzMode]="'closeable'"
    (nzOnClose)="handleCloseTag(tagItem)"
  >
    {{ sliceTagName(tagItem.productName) }}
  </nz-tag>
  } }
  <!-- tag found product search  -->

  @if(currentRoute !== 'shop'){
  <nz-card-meta
    [nzTitle]="titleForm"
    [nzDescription]="descriptionForm"
  ></nz-card-meta>
  }
  <div class="">
    @if( currentRoute === 'shop' && tags.length === 0){
    <div class="flex justify-center items-center">
      <img src="assets/images/6931683-Photoroom.png" alt="" class="w-[250px]" />
    </div>
    } @else if (currentRoute === 'shop' && tags.length !== 0){
    <div class="">
      <div class="flex justify-between items-center pb-2">
        <p class="font-medium">Mục</p>
        <p class="font-medium">Số lượng</p>
      </div>
      <section *ngFor="let tagItem of tags; track: tagItem">
        @for (tagItem of tags; track tagItem) {
        <app-renter-item />
        }
      </section>
    </div>
    } @else if (currentRoute !== 'shop' && tags.length === 0) {
    <app-renter-item />
    } @if(currentRoute === 'shop' && tags.length !== 0 || currentRoute !==
    'shop'){
    <div class="mb-3">
      <p class="text-[20px] font-medium">Thời gian thuê</p>
      <app-rental-period (handleOpenPeriod)="showModal()"></app-rental-period>
    </div>
    <div class="flex justify-between items-center">
      <p class="text-[15px] font-semibold">Đơn giá cọc</p>
      <p class="text-[20px]">300.000 VND</p>
    </div>
    <div class="flex justify-between items-center">
      <p class="text-[15px] font-semibold">Đơn giá thuê</p>
      <p class="text-[20px]">1.000.000 VND / ngày</p>
    </div>
    <div class="mb-3">
      <nz-textarea-count [nzMaxCharacterCount]="100">
        <textarea rows="4" placeholder="ghi chú" nz-input></textarea>
      </nz-textarea-count>
    </div>
    <button
      nz-button
      class="w-full bg-orange-500 h-12 text-white rounded-md hover:border-orange-600"
    >
      Chọn thuê
    </button>
    }
  </div>
</nz-card>

<ng-template #titleForm>
  <h4 class="font-medium">Thuê sản phẩm</h4>
</ng-template>
<ng-template #descriptionForm>
  <p class="text-[20px] italic text-[#B3B3B3]">Máy giặt XQB30MJ102W</p>
</ng-template>
<nz-modal
  [(nzVisible)]="isVisible"
  [nzWidth]="700"
  nzTitle="Thời gian"
  (nzOnOk)="handleOk()"
  (nzOnCancel)="handleCancel()"
>
  <ng-container *nzModalContent>
    <app-picker-timer/>
  </ng-container>
  <ng-container *nzModalFooter>
    <div class="flex justify-between items-center">
      <div class="font-semibold text-start">
        <p>
          <!-- 12:00 21/10 -->
          {{ selectedTimeStart.value }}
          {{ rangePickerTime[0] | date : "dd/MM/yyyy" }}
          <span nz-icon nzType="minus" nzTheme="outline"></span>
          <!-- 12:00 30/10 -->
          {{ selectedTimeEnd.value }}
          {{ rangePickerTime[1] | date : "dd/MM/yyyy" }}
        </p>
        <p>
          Thời gian thuê:
          <span class="text-[#0F6CF8]">{{ rentalDays }} ngày</span>
        </p>
      </div>
      <button
        nz-button
        nzType="primary"
        (click)="handleOk()"
        [nzLoading]="isConfirmLoading"
      >
        Tiếp tục
      </button>
    </div>
  </ng-container>
</nz-modal>
<!-- nz-autocomplete after search product rental of specific shop-->
<nz-autocomplete #auto>
  @for (option of options; track option.productName) {
  <nz-auto-option class="global-search-item" [nzValue]="option.productName">
    <div class="flex gap-2 items-center" (click)="onSelectProduct(option)">
      <img [src]="option.images" alt="" width="150" height="90" class="" />
      <div class="flex flex-col justify-between gap-y-5">
        <p class="text-[#B8ACAC]">{{ option.productName }}</p>
        <p class="">
          {{ option.depositPrice }} VND <br />
          <span class="text-[#1890FF]">{{ option.rentalLimitDays }} ngày</span>
        </p>
      </div>
    </div>
  </nz-auto-option>
  }
</nz-autocomplete>
<!-- nz-autocomplete after search product rental of specific shop-->
